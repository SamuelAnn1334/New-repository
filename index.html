<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÁÆÄÊòìÂïÜÂüé</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        body { background: #f5f5f5; color: #333; }
        
        /* ÂàÜÁ±ªÂØºËà™ */
        .category-nav {
            width: 20%;
            float: left;
            background: #fff;
            height: 100vh;
            overflow-y: auto;
            border-right: 1px solid #eee;
        }
        .category-item {
            padding: 15px 10px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            text-align: center;
        }
        .category-item.active {
            background: #1989fa;
            color: white;
        }
        
        /* ÂïÜÂìÅÂàóË°® */
        .product-list {
            width: 80%;
            float: right;
            padding: 10px;
            height: calc(100vh - 60px);
            overflow-y: auto;
        }
        .product-card {
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .product-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
        }
        .product-name {
            font-weight: bold;
            margin: 5px 0;
        }
        .product-desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        .product-price {
            color: #f44;
            font-weight: bold;
        }
        .product-discount {
            font-size: 12px;
            color: #1989fa;
            margin-top: 3px;
        }
        .quantity-control {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        .quantity-btn {
            width: 25px;
            height: 25px;
            background: #f7f8fa;
            border: none;
            font-size: 16px;
        }
        .quantity-input {
            width: 40px;
            height: 25px;
            text-align: center;
            border: 1px solid #f7f8fa;
            margin: 0 5px;
        }
        
        /* Ë¥≠Áâ©ËΩ¶ */
        .cart-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: white;
            display: flex;
            align-items: center;
            padding: 0 15px;
            border-top: 1px solid #eee;
            z-index: 100;
        }
        .cart-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        .cart-total {
            flex-grow: 1;
            font-weight: bold;
        }
        .checkout-btn {
            background: #1989fa;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        /* ÂºπÁ™ó */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 200;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            width: 90%;
            max-width: 400px;
            border-radius: 8px;
            padding: 15px;
            position: relative;
        }
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            background: none;
            border: none;
        }
        .modal-img {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <!-- ÂàÜÁ±ªÂØºËà™ -->
    <div class="category-nav" id="categoryNav">
        <!-- Âä®ÊÄÅÁîüÊàê -->
    </div>
    
    <!-- ÂïÜÂìÅÂàóË°® -->
    <div class="product-list" id="productList">
        <!-- Âä®ÊÄÅÁîüÊàê -->
    </div>
    
    <!-- Ë¥≠Áâ©ËΩ¶ -->
    <div class="cart-bar">
        <div class="cart-icon">üõí</div>
        <div class="cart-total">¬•0.00</div>
        <button class="checkout-btn" id="checkoutBtn">Êèê‰∫§ËÆ¢Âçï</button>
    </div>
    
    <!-- ÂïÜÂìÅËØ¶ÊÉÖÂºπÁ™ó -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal">√ó</button>
            <img class="modal-img" id="modalImg" src="" alt="ÂïÜÂìÅÂõæÁâá">
        </div>
    </div>
    
    <!-- ËÆ¢ÂçïÁ°ÆËÆ§ÂºπÁ™ó -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <h3>ËÆ¢ÂçïÊèê‰∫§ÊàêÂäü</h3>
            <p>ËÆ¢ÂçïÁºñÂè∑: <span id="orderNumber"></span></p>
            <button id="copyOrder">Â§çÂà∂ËÆ¢ÂçïÂè∑</button>
        </div>
    </div>

    <script>
        // ÂïÜÂìÅÊï∞ÊçÆ
        const products = [
            {
                id: "kcs-001",
                category: "ËçØÂìÅ",
                name: "ËúàËö£ËçØ",
                thumb: "assets/kcs-thumb.jpg",
                images: ["assets/kcs-1.jpg"],
                price: 99,
                discount: "Êª°3‰ª∂8Êäò",
                desc: "ÁôæÂπ¥ÁßòÊñπÔºåÁ•õÈ£éÊ≠¢Áóõ"
            },
            {
                id: "bt-001",
                category: "ÈºªÈÄö",
                name: "ÂÖ´‰ªôÈºªÈÄö",
                thumb: "assets/bt-thumb.jpg",
                images: ["assets/bt-1.jpg"],
                price: 68,
                discount: "Á¨¨‰∫å‰ª∂Âçä‰ª∑",
                desc: "Âø´ÈÄüÁºìËß£ÈºªÂ°û"
            },
            {
                id: "coffee-001",
                category: "È•ÆÂìÅ",
                name: "ÂáèËÇ•ÂíñÂï°",
                thumb: "assets/coffee-thumb.jpg",
                images: ["assets/coffee-1.jpg"],
                price: 128,
                discount: "Êª°200Âáè30",
                desc: "Â§©ÁÑ∂ÈÖçÊñπÔºåÂä†ÈÄü‰ª£Ë∞¢"
            }
        ];
        
        // Ë¥≠Áâ©ËΩ¶Êï∞ÊçÆ
        let cart = {};
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', function() {
            renderCategories();
            renderProducts();
            setupEventListeners();
        });
        
        // Ê∏≤ÊüìÂàÜÁ±ª
        function renderCategories() {
            const categories = [...new Set(products.map(p => p.category))];
            const categoryNav = document.getElementById('categoryNav');
            
            categories.forEach(category => {
                const div = document.createElement('div');
                div.className = 'category-item';
                div.textContent = category;
                div.addEventListener('click', () => {
                    document.querySelectorAll('.category-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    div.classList.add('active');
                    renderProducts(category);
                });
                categoryNav.appendChild(div);
            });
            
            // ÈªòËÆ§ÈÄâ‰∏≠Á¨¨‰∏Ä‰∏™ÂàÜÁ±ª
            if (categories.length > 0) {
                categoryNav.firstChild.classList.add('active');
            }
        }
        
        // Ê∏≤ÊüìÂïÜÂìÅ
        function renderProducts(category = null) {
            const productList = document.getElementById('productList');
            productList.innerHTML = '';
            
            const filteredProducts = category 
                ? products.filter(p => p.category === category)
                : products;
                
            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                
                card.innerHTML = `
                    <img class="product-img" src="${product.thumb}" alt="${product.name}">
                    <div class="product-name">${product.name}</div>
                    <div class="product-desc">${product.desc}</div>
                    <div class="product-price">¬•${product.price.toFixed(2)}</div>
                    <div class="product-discount">${product.discount}</div>
                    <div class="quantity-control">
                        <button class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="0" min="0">
                        <button class="quantity-btn plus">+</button>
                    </div>
                `;
                
                // ÁÇπÂáªÂõæÁâá/ÂêçÁß∞/ÊèèËø∞/‰ª∑Ê†ºÊü•ÁúãÂ§ßÂõæ
                const clickableElements = card.querySelectorAll('.product-img, .product-name, .product-desc, .product-price');
                clickableElements.forEach(el => {
                    el.style.cursor = 'pointer';
                    el.addEventListener('click', () => showProductModal(product));
                });
                
                // Êï∞ÈáèÊéßÂà∂
                const minusBtn = card.querySelector('.minus');
                const plusBtn = card.querySelector('.plus');
                const quantityInput = card.querySelector('.quantity-input');
                
                minusBtn.addEventListener('click', () => {
                    let qty = parseInt(quantityInput.value);
                    if (qty > 0) {
                        quantityInput.value = qty - 1;
                        updateCart(product, qty - 1);
                    }
                });
                
                plusBtn.addEventListener('click', () => {
                    let qty = parseInt(quantityInput.value) + 1;
                    quantityInput.value = qty;
                    updateCart(product, qty);
                });
                
                quantityInput.addEventListener('change', () => {
                    let qty = parseInt(quantityInput.value) || 0;
                    quantityInput.value = qty;
                    updateCart(product, qty);
                });
                
                // ÂàùÂßãÂåñË¥≠Áâ©ËΩ¶Êï∞Èáè
                if (cart[product.id]) {
                    quantityInput.value = cart[product.id].quantity;
                }
                
                productList.appendChild(card);
            });
        }
        
        // Êõ¥Êñ∞Ë¥≠Áâ©ËΩ¶
        function updateCart(product, quantity) {
            if (quantity > 0) {
                cart[product.id] = {
                    ...product,
                    quantity: quantity
                };
            } else {
                delete cart[product.id];
            }
            updateCartTotal();
        }
        
        // Êõ¥Êñ∞Ë¥≠Áâ©ËΩ¶ÊÄª‰ª∑
        function updateCartTotal() {
            let total = 0;
            Object.values(cart).forEach(item => {
                total += item.price * item.quantity;
            });
            
            document.querySelector('.cart-total').textContent = `¬•${total.toFixed(2)}`;
        }
        
        // ÊòæÁ§∫ÂïÜÂìÅÂ§ßÂõæ
        function showProductModal(product) {
            const modal = document.getElementById('productModal');
            const modalImg = document.getElementById('modalImg');
            
            modalImg.src = product.images[0];
            modal.style.display = 'flex';
        }
        
        // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨
        function setupEventListeners() {
            // ÂÖ≥Èó≠ÂïÜÂìÅÂºπÁ™ó
            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('productModal').style.display = 'none';
            });
            
            // Êèê‰∫§ËÆ¢Âçï
            document.getElementById('checkoutBtn').addEventListener('click', () => {
                if (Object.keys(cart).length === 0) {
                    alert('Ë¥≠Áâ©ËΩ¶‰∏∫Á©∫');
                    return;
                }
                
                const now = new Date();
                const orderNumber = `ORD-${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2, '0')}${now.getDate().toString().padStart(2, '0')}-${Math.floor(Math.random() * 10000).toString().padStart(4, '0')}`;
                
                document.getElementById('orderNumber').textContent = orderNumber;
                document.getElementById('orderModal').style.display = 'flex';
                
                // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ËÆ¢Âçï‰øùÂ≠òÈÄªËæë
                console.log('ËÆ¢ÂçïÂ∑≤Êèê‰∫§:', {
                    orderNumber,
                    timestamp: now.toISOString(),
                    items: cart
                });
            });
            
            // Â§çÂà∂ËÆ¢ÂçïÂè∑
            document.getElementById('copyOrder').addEventListener('click', () => {
                const orderNumber = document.getElementById('orderNumber').textContent;
                navigator.clipboard.writeText(orderNumber).then(() => {
                    alert('ËÆ¢ÂçïÂè∑Â∑≤Â§çÂà∂');
                    document.getElementById('orderModal').style.display = 'none';
                    cart = {}; // Ê∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶
                    updateCartTotal();
                    renderProducts(); // ÈáçÁΩÆÂïÜÂìÅÊï∞ÈáèÊòæÁ§∫
                });
            });
        }
    </script>
</body>
</html>
